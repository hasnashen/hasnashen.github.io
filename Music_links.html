<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Favourite Cities & Countries On the Earth</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Epunda+Slab:ital,wght@0,300..900;1,300..900&family=Noto+Sans+SC:wght@100..900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    
    <style>
        body {
            background-image: url('sanrio1106.4.jpg'); 
            background-repeat: no-repeat; 
            background-size: cover; 
            background-attachment: fixed; 
        }
    </style>

</head>
<body>
    <h1>This page will show My favourite musics.</h1>
        <ul>
            <li>Flower Dance</li>
            <li>Love Dive</li>
            <li>Spark</li>
            <li>Merry Christmas Mr. Lawrence</li>
            <li>鳥 とり の 詩 うた</li>
            <li>imaginary friend</li>
            <li>潮鳴り</li>
            <li>星河叹之悲心</li>
        </ul>
    <a href="home.html">Home Page</a>

    <audio id="bgMusic" loop></audio>

    <script>
        const songNumber = localStorage.getItem("music");
        const bgMusic = document.getElementById('bgMusic');
        

        if (songNumber === "1") bgMusic.src = "Dj_Okawari_-_Flower_Dance_feat_Tabeyellow_(mp3.pm).mp3";
        if (songNumber === "2") bgMusic.src = "7947.mp3";
        if (songNumber === "3") bgMusic.src = "Tsuki_s_Odyssey_-_Forest_Mixtape_(mp3.pm).mp3";
        if (songNumber === "4") bgMusic.src = "aespa_-_Melody_(mp3.pm).mp3";
        
        bgMusic.loop = true;  // 循环播放
        

        const savedTime = localStorage.getItem("musicTime");
        if (savedTime) {
            bgMusic.currentTime = Number(savedTime);
        }
        

        bgMusic.play();
        
        setInterval(function() {
            localStorage.setItem("musicTime", bgMusic.currentTime);
        }, 1000);

        window.addEventListener('beforeunload', function() {
        // 离开页面时保存音乐状态
        localStorage.setItem("musicPlaying", !bgMusic.paused);
        });

        // 在分页面加载时检查并恢复播放
        window.addEventListener('load', function() {
            const shouldPlay = localStorage.getItem("musicPlaying") === "true";
            if (shouldPlay && bgMusic.paused) {
            bgMusic.play();
        }
    });
    </script>


    </body>

</html>